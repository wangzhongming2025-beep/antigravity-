<!DOCTYPE html>
<html lang="zh-CN" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åŸºç¡€ç‰ˆèˆ’å°”ç‰¹æ–¹æ ¼ - æ–°å…µå…¥ä¼è„‘åŠ›è¯•ç‚¼åœº</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@400;600;900&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            color: #e4e4e7;
            overflow: hidden;
            touch-action: manipulation;
        }

        .font-mono-tech {
            font-family: 'Orbitron', sans-serif;
        }

        /* Strict B&W Theme */
        .glass-panel {
            background: rgba(20, 20, 20, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .grid-cell {
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            background-color: #1a1a1a;
            border: 1px solid #333;
            transition: all 0.1s;
            user-select: none;
            cursor: pointer;
            color: #888;
        }

        .grid-cell:active {
            background-color: #333;
            color: white;
        }

        /* No color feedback, just subtle change */
        .cell-correct {
            background: #ffffff !important;
            color: #000000 !important;
        }

        .cell-wrong {
            background: #333333 !important;
            animation: shake 0.3s ease-in-out;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        /* Tactical Floating Button */
        .captain-help-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #ef4444;
            /* Alert Red */
            color: white;
            font-weight: bold;
            padding: 12px 20px;
            border-radius: 999px;
            box-shadow: 0 4px 20px rgba(239, 68, 68, 0.4);
            z-index: 100;
            animation: pulse-red 2s infinite;
        }

        @keyframes pulse-red {
            0% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
            }
        }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center p-4">

    <!-- Header -->
    <header class="w-full max-w-md pt-8 mb-8 flex flex-col items-center opacity-80 decoration-zinc-500 grayscale">
        <div class="flex justify-between w-full items-center mb-6">
            <div class="flex items-center gap-3">
                <div
                    class="w-8 h-8 rounded bg-zinc-800 flex items-center justify-center font-bold text-white text-xs border border-zinc-600">
                    B</div>
                <h1 class="text-sm font-black uppercase tracking-widest text-zinc-400">åŸºç¡€è®­ç»ƒ (é˜‰å‰²ç‰ˆ)</h1>
            </div>
            <div class="bg-zinc-900 px-4 py-1 rounded-full border border-zinc-800 text-xs font-bold text-zinc-400">
                ç›®æ ‡: <span id="target-ptr" class="text-lg ml-1 text-white">1</span>
            </div>
        </div>

        <div class="text-6xl font-black font-mono-tech tabular-nums tracking-tighter text-zinc-500 mb-2"
            id="timer-display">
            00.000
        </div>
    </header>

    <!-- Main Game Grid -->
    <main class="w-full max-w-[400px] aspect-square p-2 glass-panel rounded-lg shadow-2xl relative grayscale">
        <div id="game-grid" class="grid grid-cols-5 gap-2 w-full h-full">
            <!-- Grid cells injected by JS -->
        </div>

        <!-- Start Overlay -->
        <div id="start-overlay" class="absolute inset-0 z-20 flex flex-col items-center justify-center bg-black/95">
            <h2 class="text-2xl font-black text-white mb-2">æ–°å…µè¯•ç‚¼</h2>
            <p class="text-zinc-500 text-xs mb-10 text-center px-8">
                åŸºç¡€é»‘ç™½æ¨¡å¼ Â· æ— å¹²æ‰°é¡¹ Â· æ— åŠ¨æ€
            </p>
            <button onclick="startGame()"
                class="px-12 py-4 bg-zinc-800 text-white border border-zinc-600 rounded font-black hover:bg-zinc-700 transition-all">
                å¼€å§‹æµ‹è¯•
            </button>
        </div>
    </main>

    <!-- Fake "Advanced Mode" Button -->
    <div class="mt-8 w-full max-w-md">
        <button onclick="showUpgradeModal('advanced')"
            class="w-full flex items-center justify-between bg-zinc-900/50 p-4 rounded border border-zinc-800 opacity-50 hover:opacity-100 transition-opacity">
            <div class="flex items-center gap-3">
                <span class="text-xl">ğŸ”’</span>
                <div class="text-left">
                    <div class="text-xs font-bold text-zinc-400 uppercase">Pro Feature</div>
                    <div class="text-sm font-bold text-white">è§£é”ï¼šé«˜çº§åŠ¨æ€å…¨å½©æ¨¡å¼</div>
                </div>
            </div>
            <span class="text-xs font-bold text-zinc-600 px-2 py-1 bg-zinc-900 rounded">LOCKED</span>
        </button>
    </div>

    <!-- "Pain Point Reveal" Result Modal -->
    <div id="result-modal"
        class="hidden fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/90 backdrop-blur-md">
        <div
            class="w-full max-w-sm bg-zinc-900 border border-red-900/50 p-6 rounded-lg text-center shadow-2xl shadow-red-900/20">
            <!-- Fear Header -->
            <div class="flex items-center justify-center gap-2 text-red-500 mb-4 animate-pulse">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" />
                    <line x1="12" y1="9" x2="12" y2="13" />
                    <line x1="12" y1="17" x2="12.01" y2="17" />
                </svg>
                <span class="font-bold uppercase tracking-widest text-xs">ä¸¥é‡è­¦å‘Š warning</span>
            </div>

            <!-- Stats -->
            <div class="mb-6 border-b border-zinc-800 pb-6">
                <div class="text-zinc-500 text-xs mb-1">æœ¬æ¬¡è€—æ—¶</div>
                <h3 class="text-4xl font-black font-mono-tech text-white mb-4" id="final-time">--.---</h3>

                <div class="flex justify-between items-center bg-red-900/10 p-3 rounded border border-red-900/30">
                    <span class="text-zinc-400 text-xs">åˆ¤å®šç­‰çº§</span>
                    <span class="text-red-500 font-black text-lg">åˆ—å…µ (æœªè¾¾æ ‡)</span>
                </div>
            </div>

            <!-- Pain Point Copy -->
            <div class="text-left mb-6 space-y-3">
                <p class="text-sm text-zinc-300 font-bold">âš ï¸ è¯¥é€Ÿåº¦ä¸¥é‡ä½äºåŒé¾„äººæ ‡å‡†ï¼</p>
                <p class="text-xs text-zinc-500 leading-relaxed">
                    å¦‚æœä¸è¿›è¡Œä¸“ä¸šå¹²é¢„ï¼Œè¿™ç§è§†è§‰æœç´¢æ•ˆç‡å¯èƒ½ä¼šå¯¼è‡´è¯¾å ‚å¬è¯¾æ•ˆç‡<span class="text-red-500 font-bold">æµå¤± 40%</span>ï¼Œä¸¥é‡å½±å“å­¦ä¸šæˆç»©ã€‚
                </p>

                <div class="mt-4 space-y-2">
                    <a href="#"
                        class="block w-full text-left p-3 rounded bg-zinc-800 border-l-4 border-cyan-500 hover:bg-zinc-700 transition"
                        onclick="alert('è·³è½¬åˆ° 299 å…ƒæ·±åº¦ä½“æ£€')">
                        <div class="text-[10px] text-cyan-400 font-bold">åŸå› åˆ†æ</div>
                        <div class="text-xs text-white">ğŸ‘‰ ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢ï¼Ÿè·å–æ·±åº¦è„‘è§†è§‰ä½“æ£€</div>
                    </a>
                    <a href="#"
                        class="block w-full text-left p-3 rounded bg-zinc-800 border-l-4 border-yellow-500 hover:bg-zinc-700 transition"
                        onclick="alert('è·³è½¬åˆ° 2980 ç‰¹è®­è¥')">
                        <div class="text-[10px] text-yellow-400 font-bold">è§£å†³æ–¹æ¡ˆ</div>
                        <div class="text-xs text-white">ğŸ‘‰ 21å¤©æå‡åˆ°20ç§’ï¼ŸåŠ å…¥ç‰¹è®­è¥</div>
                    </a>
                </div>
            </div>

            <div class="space-y-3">
                <button onclick="startGame()"
                    class="w-full bg-zinc-800 text-zinc-400 py-3 rounded font-bold hover:text-white transition-colors border border-zinc-700">
                    ä¸æœæ°”ï¼Ÿå†è¯•ä¸€æ¬¡
                </button>
            </div>
        </div>
    </div>

    <!-- Upgrade / Locked Feature Modal -->
    <div id="upgrade-modal"
        class="hidden fixed inset-0 z-[60] flex items-center justify-center p-6 bg-black/95 backdrop-blur-xl">
        <div class="w-full max-w-sm text-center relative">
            <button onclick="document.getElementById('upgrade-modal').classList.add('hidden')"
                class="absolute -top-12 right-0 text-zinc-500 hover:text-white p-2">âœ•</button>

            <div
                class="w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-600 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg shadow-orange-500/20">
                <span class="text-3xl">ğŸ‘‘</span>
            </div>

            <h3 class="text-2xl font-black text-white mb-2">ç‰¹ç§å…µç‰¹è®­è¥ Â· ä¸“å±æ­¦å™¨</h3>
            <p class="text-sm text-zinc-400 mb-8 px-4">
                è¿™æ˜¯ã€é«˜çº§å­¦å‘˜ã€‘ä¸“å±åŠŸèƒ½ã€‚<br>
                åŠ å…¥æˆ˜é˜Ÿï¼Œè§£é”å…¨éƒ¨ 12 ç§è„‘åŠ›æ ¸æ­¦å™¨ï¼
            </p>

            <button onclick="window.location.href='#' /* Upsell Link */"
                class="w-full bg-gradient-to-r from-yellow-500 to-orange-600 text-black font-black py-4 rounded-xl shadow-lg shadow-orange-500/20 hover:scale-105 transition-transform mb-4">
                ç«‹å³è§£é” (Â¥2980)
            </button>
            <button onclick="document.getElementById('upgrade-modal').classList.add('hidden')"
                class="text-xs text-zinc-600 hover:text-white underline">
                æš‚ä¸éœ€è¦ï¼Œç»§ç»­ä½¿ç”¨åŸºç¡€ç‰ˆ
            </button>
        </div>
    </div>

    <!-- Captain Save Me Button -->
    <a href="javascript:void(0)" onclick="showWeChatModal()" class="captain-help-btn flex items-center gap-2">
        <span>ğŸ†˜</span>
        <span>è¿é•¿æ•‘å‘½</span>
    </a>

    <!-- WeChat Contact Modal -->
    <div id="wechat-modal" class="hidden fixed inset-0 z-[70] flex items-center justify-center p-6 bg-black/90">
        <div class="w-full max-w-xs bg-white text-black p-6 rounded-lg text-center relative">
            <button onclick="document.getElementById('wechat-modal').classList.add('hidden')"
                class="absolute top-2 right-2 text-zinc-400 hover:text-black p-2">âœ•</button>

            <h3 class="text-xl font-black mb-2">å‘¼å«è¿é•¿</h3>
            <p class="text-sm text-zinc-600 mb-6 font-bold">
                â€œå­©å­ä¸é…åˆï¼Ÿç»ƒä¸å‡ºæ•ˆæœï¼Ÿ<br>
                ä¸€å¯¹ä¸€è·å–æˆ˜æœ¯æŒ‡å¯¼ï¼â€
            </p>

            <div class="bg-zinc-100 p-4 rounded mb-4">
                <div class="text-xs text-zinc-500 mb-1">å¾®ä¿¡å·</div>
                <div class="text-2xl font-black select-all" onclick="copyWechat()">lwdz2026</div>
                <div class="text-[10px] text-green-600 mt-1" id="copy-msg">ç‚¹å‡»å¤åˆ¶</div>
            </div>

            <button onclick="window.location.href='weixin://'"
                class="w-full bg-green-600 text-white font-bold py-3 rounded hover:bg-green-700 transition-colors">
                æ‰“å¼€å¾®ä¿¡æ·»åŠ 
            </button>
        </div>
    </div>

    <script src="auth_trainee.js"></script>
    <script>
        let gameState = {
            current: 1,
            startTime: null,
            timerInterval: null,
            numbers: [],
            isRunning: false
        };

        const gridElement = document.getElementById('game-grid');

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createGrid() {
            gridElement.innerHTML = '';
            if (gameState.numbers.length === 0) {
                for (let i = 1; i <= 25; i++) gameState.numbers.push(i);
            }
            shuffle(gameState.numbers);

            gameState.numbers.forEach(num => {
                const cell = document.createElement('div');
                // Strict B&W styling
                cell.className = 'grid-cell rounded text-2xl md:text-3xl';
                cell.innerText = num;
                cell.onclick = () => handleCellClick(num, cell);
                gridElement.appendChild(cell);
            });
        }

        function handleCellClick(num, element) {
            if (!gameState.isRunning) return;

            if (num === gameState.current) {
                // Correct
                element.classList.add('cell-correct');

                if (gameState.current === 25) {
                    endGame();
                    return;
                }

                gameState.current++;
                document.getElementById('target-ptr').innerText = gameState.current;
            } else {
                // Wrong
                element.classList.add('cell-wrong');
                setTimeout(() => element.classList.remove('cell-wrong'), 300);
            }
        }

        function startGame() {
            gameState.current = 1;
            gameState.isRunning = true;
            gameState.numbers = [];
            document.getElementById('target-ptr').innerText = '1';
            document.getElementById('result-modal').classList.add('hidden');
            document.getElementById('start-overlay').classList.add('hidden');

            createGrid();

            gameState.startTime = performance.now();
            gameState.timerInterval = setInterval(updateTimer, 10);
        }

        function updateTimer() {
            const now = performance.now();
            const diff = now - gameState.startTime;
            const seconds = (diff / 1000).toFixed(3);
            document.getElementById('timer-display').innerText = seconds.padStart(6, '0');
        }

        function endGame() {
            clearInterval(gameState.timerInterval);
            gameState.isRunning = false;

            const time = parseFloat(document.getElementById('timer-display').innerText);
            document.getElementById('final-time').innerText = time.toFixed(3) + 'ç§’';

            // "Pain Point Reveal" Logic
            document.getElementById('result-modal').classList.remove('hidden');

            // Report to DB (Silent)
            if (typeof TraineeAuth !== 'undefined') {
                TraineeAuth.reportResult('basic_schulte_trial', 'Rookie', time);
            }
        }

        function showUpgradeModal(type) {
            document.getElementById('upgrade-modal').classList.remove('hidden');
        }

        function showWeChatModal() {
            document.getElementById('wechat-modal').classList.remove('hidden');
        }

        function copyWechat() {
            navigator.clipboard.writeText('lwdz2026').then(() => {
                document.getElementById('copy-msg').innerText = "å·²å¤åˆ¶ï¼";
                setTimeout(() => document.getElementById('copy-msg').innerText = "ç‚¹å‡»å¤åˆ¶", 2000);
            });
        }

        window.onload = () => {
            createGrid();
        };
    </script>
</body>

</html>