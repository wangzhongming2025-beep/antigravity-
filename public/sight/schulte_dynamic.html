<!DOCTYPE html>
<html lang="zh-CN" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èˆ’å°”ç‰¹Â·æµä½“æ™ºåŠ›ç‰ˆ | åŠ¨æ€è§†è§‰ç‰¹è®­</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Inter:wght@400;600;800&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0a0a0a 100%);
            color: #e4e4e7;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .tech-font {
            font-family: 'Orbitron', sans-serif;
        }

        .glass-panel {
            background: rgba(24, 24, 27, 0.85);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .grid-container {
            position: relative;
            width: 100%;
            max-width: 360px;
            aspect-ratio: 1;
            margin: 0 auto;
        }

        .floating-cell {
            position: absolute;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 800;
            background: rgba(24, 24, 27, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            cursor: pointer;
            transition: transform 0.1s ease, box-shadow 0.2s ease;
            user-select: none;
            z-index: 10;
        }

        .floating-cell:hover {
            transform: scale(1.1);
            z-index: 20;
        }

        .floating-cell.correct {
            background: rgba(16, 185, 129, 0.4);
            border-color: #10b981;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
            pointer-events: none;
        }

        .floating-cell.wrong {
            animation: shake 0.3s ease;
            border-color: #ef4444;
        }

        .floating-cell.distractor {
            opacity: 0.6;
            font-size: 1.2rem;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-8px);
            }

            75% {
                transform: translateX(8px);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translate(0, 0);
            }

            25% {
                transform: translate(5px, -5px);
            }

            50% {
                transform: translate(-3px, 5px);
            }

            75% {
                transform: translate(5px, 3px);
            }
        }

        @keyframes colorPulse {

            0%,
            100% {
                color: #e4e4e7;
            }

            50% {
                color: #06b6d4;
            }
        }

        .floating-cell.animated {
            animation: float 3s ease-in-out infinite;
        }

        .floating-cell.color-change {
            animation: colorPulse 2s ease-in-out infinite;
        }

        .mode-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .pulse-ring {
            position: absolute;
            inset: -4px;
            border: 2px solid #06b6d4;
            border-radius: 16px;
            animation: pulseRing 1.5s ease-out infinite;
            pointer-events: none;
        }

        @keyframes pulseRing {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(1.3);
                opacity: 0;
            }
        }

        .chaos-bg {
            position: absolute;
            inset: 0;
            overflow: hidden;
            pointer-events: none;
            z-index: 0;
        }

        .chaos-line {
            position: absolute;
            width: 2px;
            height: 100px;
            background: linear-gradient(to bottom, transparent, rgba(6, 182, 212, 0.2), transparent);
            animation: chaosFloat 8s ease-in-out infinite;
        }

        @keyframes chaosFloat {

            0%,
            100% {
                transform: translateY(-100px) rotate(45deg);
            }

            50% {
                transform: translateY(400px) rotate(45deg);
            }
        }
    </style>
</head>

<body class="p-4 md:p-8">
    <div class="max-w-lg mx-auto">

        <!-- Header -->
        <header class="text-center mb-6">
            <div
                class="inline-block px-4 py-1 bg-purple-500/20 text-purple-400 text-xs font-bold rounded-full mb-4 uppercase tracking-widest">
                ğŸ”¥ è¿›é˜¶ç‰¹è®­
            </div>
            <h1 class="tech-font text-2xl md:text-3xl text-white mb-2">
                èˆ’å°”ç‰¹ <span class="text-purple-400">æµä½“æ™ºåŠ›ç‰ˆ</span>
            </h1>
            <p class="text-zinc-500 text-sm">åŠ¨æ€è¿½è¸ª Â· é¢œè‰²å¹²æ‰° Â· æé™æŒ‘æˆ˜</p>
        </header>

        <!-- Game Container -->
        <div id="game-container">

            <!-- Start Screen -->
            <div id="start-screen" class="glass-panel rounded-3xl p-8 text-center">
                <div
                    class="w-20 h-20 bg-purple-500/20 rounded-2xl flex items-center justify-center mx-auto mb-6 text-4xl">
                    ğŸŒªï¸
                </div>
                <h2 class="text-xl font-bold text-white mb-4">é€‰æ‹©æŒ‘æˆ˜æ¨¡å¼</h2>

                <div class="space-y-3 mb-8">
                    <!-- Mode 1: Moving -->
                    <button onclick="startGame('moving')"
                        class="w-full glass-panel rounded-xl p-4 text-left hover:border-cyan-500 border border-transparent transition-all group">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-cyan-500/20 rounded-xl flex items-center justify-center text-2xl">
                                ğŸƒ</div>
                            <div class="flex-1">
                                <p class="font-bold text-white group-hover:text-cyan-400 transition-colors">åŠ¨æ€æ¼‚ç§»</p>
                                <p class="text-xs text-zinc-500">æ•°å­—ä¼šç¼“æ…¢ç§»åŠ¨ï¼Œè€ƒéªŒè¿½è¸ªèƒ½åŠ›</p>
                            </div>
                            <span class="mode-badge bg-cyan-500/20 text-cyan-400">ä¸­ç­‰</span>
                        </div>
                    </button>

                    <!-- Mode 2: Color Change -->
                    <button onclick="startGame('color')"
                        class="w-full glass-panel rounded-xl p-4 text-left hover:border-yellow-500 border border-transparent transition-all group">
                        <div class="flex items-center gap-4">
                            <div
                                class="w-12 h-12 bg-yellow-500/20 rounded-xl flex items-center justify-center text-2xl">
                                ğŸ¨</div>
                            <div class="flex-1">
                                <p class="font-bold text-white group-hover:text-yellow-400 transition-colors">é¢œè‰²é—ªçƒ</p>
                                <p class="text-xs text-zinc-500">æ•°å­—é¢œè‰²ä¸æ–­å˜åŒ–ï¼Œå¹²æ‰°è§†è§‰</p>
                            </div>
                            <span class="mode-badge bg-yellow-500/20 text-yellow-400">å›°éš¾</span>
                        </div>
                    </button>

                    <!-- Mode 3: Distractors -->
                    <button onclick="startGame('distractor')"
                        class="w-full glass-panel rounded-xl p-4 text-left hover:border-red-500 border border-transparent transition-all group">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center text-2xl">ğŸ‘»
                            </div>
                            <div class="flex-1">
                                <p class="font-bold text-white group-hover:text-red-400 transition-colors">å¹½çµå¹²æ‰°</p>
                                <p class="text-xs text-zinc-500">å‡ºç°å‡æ•°å­—å¹²æ‰°é¡¹ï¼Œè€ƒéªŒè¾¨åˆ«åŠ›</p>
                            </div>
                            <span class="mode-badge bg-red-500/20 text-red-400">åœ°ç‹±</span>
                        </div>
                    </button>

                    <!-- Mode 4: Chaos -->
                    <button onclick="startGame('chaos')"
                        class="w-full glass-panel rounded-xl p-4 text-left hover:border-purple-500 border border-transparent transition-all group">
                        <div class="flex items-center gap-4">
                            <div
                                class="w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center text-2xl">
                                ğŸ’€</div>
                            <div class="flex-1">
                                <p class="font-bold text-white group-hover:text-purple-400 transition-colors">ç»ˆææ··æ²Œ</p>
                                <p class="text-xs text-zinc-500">ç§»åŠ¨ + å˜è‰² + å¹²æ‰°ï¼Œå…¨éƒ¨å¼€å¯ï¼</p>
                            </div>
                            <span class="mode-badge bg-purple-500/20 text-purple-400">å™©æ¢¦</span>
                        </div>
                    </button>
                </div>

                <a href="schulte_grid.html" class="text-xs text-zinc-500 hover:text-zinc-300 transition-colors">
                    â† è¿”å›ç»å…¸ç‰ˆèˆ’å°”ç‰¹
                </a>
            </div>

            <!-- Playing Screen -->
            <div id="play-screen" class="hidden">
                <!-- Stats Bar -->
                <div class="flex justify-between items-center mb-4">
                    <div class="glass-panel rounded-xl px-4 py-2">
                        <p class="text-[10px] text-zinc-500 uppercase tracking-widest">æ¨¡å¼</p>
                        <p class="text-sm font-bold text-purple-400" id="current-mode">--</p>
                    </div>
                    <div class="glass-panel rounded-xl px-4 py-2 text-center">
                        <p class="text-[10px] text-zinc-500 uppercase tracking-widest">ä¸‹ä¸€ä¸ª</p>
                        <p class="tech-font text-2xl text-cyan-400" id="next-number">1</p>
                    </div>
                    <div class="glass-panel rounded-xl px-4 py-2 text-right">
                        <p class="text-[10px] text-zinc-500 uppercase tracking-widest">ç”¨æ—¶</p>
                        <p class="tech-font text-lg text-white" id="timer">0.0</p>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="glass-panel rounded-xl p-3 mb-4">
                    <div class="flex justify-between text-xs text-zinc-500 mb-2">
                        <span>è¿›åº¦</span>
                        <span id="progress-text">0 / 25</span>
                    </div>
                    <div class="h-2 bg-zinc-800 rounded-full overflow-hidden">
                        <div id="progress-bar"
                            class="h-full bg-gradient-to-r from-purple-500 to-cyan-500 transition-all duration-300"
                            style="width: 0%"></div>
                    </div>
                </div>

                <!-- Grid Area -->
                <div class="glass-panel rounded-3xl p-4 mb-4 relative overflow-hidden">
                    <!-- Chaos Background -->
                    <div class="chaos-bg" id="chaos-bg"></div>

                    <!-- Grid Container -->
                    <div class="grid-container" id="grid-container">
                        <!-- Cells generated by JS -->
                    </div>
                </div>

                <!-- Hint -->
                <p class="text-center text-xs text-zinc-600">ç‚¹å‡»æ•°å­— 1-25ï¼ŒæŒ‰é¡ºåºå®ŒæˆæŒ‘æˆ˜</p>
            </div>

            <!-- Result Screen -->
            <div id="result-screen" class="glass-panel rounded-3xl p-8 text-center hidden">
                <div class="w-20 h-20 bg-green-500/20 rounded-2xl flex items-center justify-center mx-auto mb-6 text-4xl"
                    id="result-icon">
                    ğŸ†
                </div>
                <h2 class="text-xl font-bold text-white mb-2">æŒ‘æˆ˜å®Œæˆï¼</h2>
                <p class="text-zinc-500 text-sm mb-6" id="result-subtitle">--</p>

                <!-- Time Display -->
                <div class="glass-panel rounded-2xl p-6 mb-6">
                    <p class="text-xs text-zinc-500 uppercase tracking-widest mb-2">å®Œæˆæ—¶é—´</p>
                    <p class="tech-font text-5xl font-bold text-cyan-400" id="final-time">0.0</p>
                    <p class="text-zinc-500 text-sm mt-1">ç§’</p>
                </div>

                <!-- Stats -->
                <div class="grid grid-cols-2 gap-3 mb-8">
                    <div class="glass-panel rounded-xl p-4">
                        <p class="text-lg font-bold text-purple-400" id="stat-mode">--</p>
                        <p class="text-[10px] text-zinc-500">æŒ‘æˆ˜æ¨¡å¼</p>
                    </div>
                    <div class="glass-panel rounded-xl p-4">
                        <p class="text-lg font-bold" id="stat-rank">--</p>
                        <p class="text-[10px] text-zinc-500">è¯„çº§</p>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="space-y-3">
                    <button onclick="restartGame()"
                        class="w-full bg-gradient-to-r from-purple-500 to-cyan-500 text-black font-black py-4 rounded-xl transition-all hover:scale-[1.02] active:scale-95">
                        ğŸ”„ å†æ¥ä¸€å±€
                    </button>
                    <button onclick="backToStart()"
                        class="w-full glass-panel text-zinc-400 font-bold py-4 rounded-xl transition-all hover:text-white">
                        â† é€‰æ‹©å…¶ä»–æ¨¡å¼
                    </button>
                </div>
            </div>

        </div>

        <!-- Footer -->
        <footer class="text-center mt-8">
            <a href="index.html" class="text-xs text-zinc-600 hover:text-zinc-400 transition-colors">â† è¿”å›å·¥å…·ç®±</a>
        </footer>

    </div>

    <script>
        // Game State
        let currentMode = 'moving';
        let currentNumber = 1;
        let startTime = 0;
        let timerInterval = null;
        let cells = [];
        let moveIntervals = [];

        const modeNames = {
            'moving': 'åŠ¨æ€æ¼‚ç§»',
            'color': 'é¢œè‰²é—ªçƒ',
            'distractor': 'å¹½çµå¹²æ‰°',
            'chaos': 'ç»ˆææ··æ²Œ'
        };

        // Start Game
        function startGame(mode) {
            currentMode = mode;
            currentNumber = 1;

            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('play-screen').classList.remove('hidden');

            document.getElementById('current-mode').textContent = modeNames[mode];
            document.getElementById('next-number').textContent = '1';
            document.getElementById('progress-text').textContent = '0 / 25';
            document.getElementById('progress-bar').style.width = '0%';

            // Setup chaos background for chaos mode
            const chaosBg = document.getElementById('chaos-bg');
            chaosBg.innerHTML = '';
            if (mode === 'chaos') {
                for (let i = 0; i < 8; i++) {
                    const line = document.createElement('div');
                    line.className = 'chaos-line';
                    line.style.left = (Math.random() * 100) + '%';
                    line.style.animationDelay = (Math.random() * 5) + 's';
                    chaosBg.appendChild(line);
                }
            }

            generateGrid();

            // Start timer
            startTime = Date.now();
            timerInterval = setInterval(updateTimer, 100);
        }

        // Generate Grid
        function generateGrid() {
            const container = document.getElementById('grid-container');
            container.innerHTML = '';
            cells = [];
            moveIntervals.forEach(i => clearInterval(i));
            moveIntervals = [];

            // Generate numbers 1-25
            const numbers = Array.from({ length: 25 }, (_, i) => i + 1);

            // Shuffle positions
            const positions = [];
            const gridSize = 5;
            const cellSize = 60;
            const containerSize = 320;
            const gap = (containerSize - gridSize * cellSize) / (gridSize - 1);

            for (let row = 0; row < gridSize; row++) {
                for (let col = 0; col < gridSize; col++) {
                    positions.push({
                        x: col * (cellSize + gap) + 10,
                        y: row * (cellSize + gap) + 10
                    });
                }
            }

            // Shuffle numbers
            for (let i = numbers.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [numbers[i], numbers[j]] = [numbers[j], numbers[i]];
            }

            // Create cells
            numbers.forEach((num, idx) => {
                const cell = document.createElement('div');
                cell.className = 'floating-cell';
                cell.textContent = num;
                cell.dataset.num = num;
                cell.style.left = positions[idx].x + 'px';
                cell.style.top = positions[idx].y + 'px';
                cell.onclick = () => clickCell(cell, num);

                // Apply mode effects
                if (currentMode === 'moving' || currentMode === 'chaos') {
                    cell.classList.add('animated');
                    cell.style.animationDelay = (Math.random() * 2) + 's';

                    // Random movement
                    const interval = setInterval(() => {
                        if (cell.classList.contains('correct')) return;
                        const dx = (Math.random() - 0.5) * 20;
                        const dy = (Math.random() - 0.5) * 20;
                        const newX = Math.max(0, Math.min(containerSize - cellSize, parseFloat(cell.style.left) + dx));
                        const newY = Math.max(0, Math.min(containerSize - cellSize, parseFloat(cell.style.top) + dy));
                        cell.style.left = newX + 'px';
                        cell.style.top = newY + 'px';
                    }, 2000);
                    moveIntervals.push(interval);
                }

                if (currentMode === 'color' || currentMode === 'chaos') {
                    cell.classList.add('color-change');
                    cell.style.animationDelay = (Math.random() * 2) + 's';
                }

                container.appendChild(cell);
                cells.push(cell);
            });

            // Add distractors for distractor/chaos mode
            if (currentMode === 'distractor' || currentMode === 'chaos') {
                const distractorSymbols = ['A', 'B', 'X', 'Y', '?', '#', '@', '&', '*', '!'];
                const numDistractors = currentMode === 'chaos' ? 8 : 5;

                for (let i = 0; i < numDistractors; i++) {
                    const distractor = document.createElement('div');
                    distractor.className = 'floating-cell distractor';
                    distractor.textContent = distractorSymbols[Math.floor(Math.random() * distractorSymbols.length)];
                    distractor.style.left = (Math.random() * (containerSize - cellSize)) + 10 + 'px';
                    distractor.style.top = (Math.random() * (containerSize - cellSize)) + 10 + 'px';
                    distractor.style.color = `hsl(${Math.random() * 360}, 70%, 60%)`;

                    if (currentMode === 'chaos') {
                        distractor.classList.add('animated');
                        distractor.style.animationDelay = (Math.random() * 3) + 's';
                    }

                    distractor.onclick = () => {
                        distractor.classList.add('wrong');
                        setTimeout(() => distractor.classList.remove('wrong'), 300);
                    };

                    container.appendChild(distractor);
                }
            }
        }

        // Update Timer
        function updateTimer() {
            const elapsed = (Date.now() - startTime) / 1000;
            document.getElementById('timer').textContent = elapsed.toFixed(1);
        }

        // Click Cell
        function clickCell(cell, num) {
            if (num === currentNumber) {
                // Correct!
                cell.classList.add('correct');

                // Add pulse ring effect
                const ring = document.createElement('div');
                ring.className = 'pulse-ring';
                cell.appendChild(ring);
                setTimeout(() => ring.remove(), 1500);

                currentNumber++;
                document.getElementById('next-number').textContent = currentNumber <= 25 ? currentNumber : 'âœ“';
                document.getElementById('progress-text').textContent = `${currentNumber - 1} / 25`;
                document.getElementById('progress-bar').style.width = ((currentNumber - 1) / 25 * 100) + '%';

                if (currentNumber > 25) {
                    endGame();
                }
            } else {
                cell.classList.add('wrong');
                setTimeout(() => cell.classList.remove('wrong'), 300);
            }
        }

        // End Game
        function endGame() {
            clearInterval(timerInterval);
            moveIntervals.forEach(i => clearInterval(i));

            const finalTime = (Date.now() - startTime) / 1000;

            document.getElementById('play-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            document.getElementById('final-time').textContent = finalTime.toFixed(1);
            document.getElementById('stat-mode').textContent = modeNames[currentMode];

            // Calculate rank based on time and mode
            let rank = '';
            let rankColor = '';
            const baseTime = currentMode === 'chaos' ? 60 : currentMode === 'distractor' ? 50 : currentMode === 'color' ? 45 : 40;

            if (finalTime < baseTime * 0.5) {
                rank = 'ğŸ–ï¸ ç‰¹ç§å…µ';
                rankColor = 'text-yellow-400';
            } else if (finalTime < baseTime * 0.7) {
                rank = 'â­ ç²¾è‹±';
                rankColor = 'text-cyan-400';
            } else if (finalTime < baseTime) {
                rank = 'âœ… åˆæ ¼';
                rankColor = 'text-green-400';
            } else {
                rank = 'ğŸ”§ éœ€è®­ç»ƒ';
                rankColor = 'text-red-400';
            }

            document.getElementById('stat-rank').textContent = rank;
            document.getElementById('stat-rank').className = `text-lg font-bold ${rankColor}`;

            // Subtitle
            const subtitles = {
                'moving': 'åŠ¨æ€è¿½è¸ªèƒ½åŠ›æµ‹è¯•å®Œæˆï¼',
                'color': 'æŠ—å¹²æ‰°è§†è§‰èƒ½åŠ›æµ‹è¯•å®Œæˆï¼',
                'distractor': 'ä¿¡æ¯ç­›é€‰èƒ½åŠ›æµ‹è¯•å®Œæˆï¼',
                'chaos': 'ç»ˆææ··æ²ŒæŒ‘æˆ˜å®Œæˆï¼ä½ æ˜¯çœŸæ­£çš„ç‰¹ç§å…µï¼'
            };
            document.getElementById('result-subtitle').textContent = subtitles[currentMode];
        }

        // Restart
        function restartGame() {
            startGame(currentMode);
        }

        // Back to start
        function backToStart() {
            clearInterval(timerInterval);
            moveIntervals.forEach(i => clearInterval(i));
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('play-screen').classList.add('hidden');
            document.getElementById('start-screen').classList.remove('hidden');
        }
    </script>
</body>

</html>